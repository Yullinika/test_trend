(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},15:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(9),s=a.n(l),c=(a(15),a(2)),i=a(3),r=a(5),u=a(4),m=a(6),h=(a(17),a(1)),b=a(7),p=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={backgroundImage:"url("+this.props.elementUrl.baseUrl+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"noRepeat"};return o.a.createElement("div",{className:"col-xs-4 col-sm-3 col-md-3"},o.a.createElement("div",{className:"thumbnail photo"},o.a.createElement("div",{className:"photo_img",style:e})))}}]),t}(o.a.Component),d=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onBackToAlbums=function(){a.props.onTypePageAlbums("albums")},a.state={isLoadPhotos:!1,photosList:[],nextPageToken:null},a.onBackToAlbums=a.onBackToAlbums.bind(Object(h.a)(Object(h.a)(a))),a.onLoadNextPage=a.onLoadNextPage.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onLoadNextPage",value:function(){var e=this,t=localStorage.getItem("access_token"),a=localStorage.getItem("albumId"),n=this.state.nextPageToken;fetch("https://photoslibrary.googleapis.com/v1/mediaItems:search?albumId="+a+"&pageToken="+n,{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({isLoadPhotos:!0,photosList:e.state.photosList.concat(Object.values(t.mediaItems)),nextPageToken:t.nextPageToken})},function(e){})}},{key:"componentDidMount",value:function(){var e=this;if(!this.state.nextPageToken){var t=localStorage.getItem("access_token"),a=localStorage.getItem("albumId");console.log("albumId = ",a),fetch("https://photoslibrary.googleapis.com/v1/mediaItems:search?albumId="+a,{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({isLoadPhotos:!0,photosList:Object.values(t.mediaItems),nextPageToken:t.nextPageToken})},function(e){})}}},{key:"render",value:function(){var e=this.state.photosList;if(console.log("photosList = ",e),null==e)return o.a.createElement("div",null,"Loading...");var t=e.map(function(e){return o.a.createElement(p,{key:e.id,elementUrl:e})}),a=this.state.nextPageToken?o.a.createElement("div",{className:"col-xs-4 col-sm-3 col-md-3"}," ",o.a.createElement("button",{className:"btn btn-default",onClick:this.onLoadNextPage},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):null;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"form-group"},o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-default",onClick:this.onBackToAlbums},"\u041d\u0430\u0437\u0430\u0434 \u043a \u0430\u043b\u044c\u0431\u043e\u043c\u0430\u043c")),o.a.createElement("hr",null)),o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"row"},t,a)))}}]),t}(o.a.Component),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).loadPhotos=function(){localStorage.setItem("albumId",this.props.elementInfo.id),this.props.onOpenAlbum(),this.setState({isLoadPhotos:!0})},a.openAlbumInfo=function(){a.props.onOpenAlbumInfo(a.props.elementInfo)},a.state={isLoadPhoto:!1},a.loadPhotos=a.loadPhotos.bind(Object(h.a)(Object(h.a)(a))),a.openAlbumInfo=a.openAlbumInfo.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.elementInfo,t={backgroundImage:"url("+e.coverPhotoBaseUrl+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"noRepeat"};return this.state.isLoadPhotos?o.a.createElement(d,{onTypePageAlbums:this.onTypePageChange}):o.a.createElement("div",{className:"col-sm-6 col-md-4"},o.a.createElement("div",{className:"thumbnail album",onClick:this.openAlbumInfo},o.a.createElement("div",{className:"album_img",style:t}),o.a.createElement("div",{className:"caption album_caption"},o.a.createElement("h4",null,e.title),o.a.createElement("h5",null,o.a.createElement("span",{className:"glyphicon glyphicon-picture"})," ",e.mediaItemsCount),o.a.createElement("button",{className:"btn btn-default",onClick:this.loadPhotos},"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0444\u043e\u0442\u043e"))))}}]),t}(o.a.Component),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={isLoadPhotos:!1,photosList:null,nextPageToken:null},a.onLoadNextPage=a.onLoadNextPage.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onLoadNextPage",value:function(){var e=this,t=localStorage.getItem("access_token"),a=localStorage.getItem("albumId"),n=this.state.nextPageToken;fetch("https://photoslibrary.googleapis.com/v1/mediaItems:search?albumId="+a+"&pageToken="+n,{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({isLoadPhotos:!0,photosList:e.state.photosList.concat(Object.values(t.mediaItems)),nextPageToken:t.nextPageToken})},function(e){})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("access_token"),a=localStorage.getItem("albumId");this.state.nextPageToken||fetch("https://photoslibrary.googleapis.com/v1/mediaItems:search?albumId="+a,{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){e.setState({isLoadPhotos:!0,photosList:Object.values(t.mediaItems),nextPageToken:t.nextPageToken})},function(e){})}},{key:"render",value:function(){if(!this.props.album)return null;var e=this.state.photosList.map(function(e){return o.a.createElement(p,{key:e.id,elementUrl:e})}),t=this.state.nextPageToken?o.a.createElement("div",{className:"col-xs-4 col-sm-3 col-md-3"}," ",o.a.createElement("button",{className:"btn btn-default",onClick:this.onLoadNextPage},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):null;return o.a.createElement("div",{className:"popup"},o.a.createElement("div",{className:"popup_inner modal in"},o.a.createElement("div",{className:"modal-dialog"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("button",{type:"button",className:"close",onClick:this.props.onClose},"\xd7"),o.a.createElement("h4",{className:"modal-title"},this.props.album.title),o.a.createElement("ul",{className:"list-unstyled"},o.a.createElement("li",null,o.a.createElement("span",null,"mediaItemsCount: "),this.props.album.mediaItemsCount))),o.a.createElement("div",{className:"modal-body clearfix"},o.a.createElement("div",{className:"row"},e,t))))))}}]),t}(o.a.Component),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onOpenAlbumInfo=function(e){a.setState({albumForOpen:e})},a.onCloseAlbumInfo=function(){a.setState({albumForOpen:null})},a.onOpenAlbum=function(){a.props.onTypePagePhotos("photos")},a.state={isLoadAlbums:!1,albumsList:null,albumForOpen:null,nextPageToken:null},a.onOpenAlbum=a.onOpenAlbum.bind(Object(h.a)(Object(h.a)(a))),a.onOpenAlbumInfo=a.onOpenAlbumInfo.bind(Object(h.a)(Object(h.a)(a))),a.onCloseAlbumInfo=a.onCloseAlbumInfo.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("access_token");fetch("https://photoslibrary.googleapis.com/v1/albums?access_token="+encodeURIComponent(t)).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,albumsList:Object.values(t.albums),nextPageToken:t.nextPageToken})})}},{key:"render",value:function(){var e=this,t=this.state.albumsList;if(null==t)return o.a.createElement("div",{className:"col-md-12"},"Loading...");var a=t.filter(function(t){return t.title.indexOf(e.props.filterText)>=0}).map(function(t){return o.a.createElement(g,{key:t.id,elementInfo:t,onOpenAlbum:e.onOpenAlbum,onOpenAlbumInfo:e.onOpenAlbumInfo})});return o.a.createElement("div",null,a,o.a.createElement(f,{album:this.state.albumForOpen,onClose:this.onCloseAlbumInfo}))}}]),t}(o.a.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).heandeChangeTextFilter=function(e){a.props.onChangeTextFilter(e.target.value)},a.heandeChangeTextFilter=a.heandeChangeTextFilter.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"form-group"},o.a.createElement("br",null),o.a.createElement("input",{type:"text",className:"form-control",value:this.props.textFilter,onChange:this.heandeChangeTextFilter})),o.a.createElement("hr",null))}}]),t}(o.a.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).onTypePageChange=function(e){a.setState({typePage:e}),localStorage.setItem("typePage",e)},a.onChangeFilterText=function(e){a.setState({filterText:e})},a.authSuccess=function(){this.googleAuth=Object(b.googleGetAuthResponse)();var e=this.googleAuth.accessToken;localStorage.setItem("access_token",e),sessionStorage.setItem("session_auth","true"),localStorage.setItem("typePage","albums"),this.setState({isAuth:!0})},a.clientId="600756880051-t2quk096og52s9i6h4vv7ugg7ael46kr.apps.googleusercontent.com",a.scope="https://www.googleapis.com/auth/photoslibrary.readonly",a.googleAuth=localStorage.getItem("access_token")||!1,a.state={typePage:localStorage.getItem("typePage")||"albums",isAuth:a.googleAuth,filterText:""},a.authSuccess=a.authSuccess.bind(Object(h.a)(Object(h.a)(a))),a.onTypePageChange=a.onTypePageChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return sessionStorage.getItem("session_auth")||!1?"albums"===this.state.typePage?o.a.createElement("div",null,o.a.createElement(O,{filterText:this.state.filterText,onChangeTextFilter:this.onChangeFilterText}),o.a.createElement(v,{filterText:this.state.filterText,onTypePagePhotos:this.onTypePageChange})):o.a.createElement(d,{onTypePageAlbums:this.onTypePageChange}):o.a.createElement(b.GoogleAPI,{clientId:this.clientId,scope:this.scope},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(b.GoogleLogin,{onLoginSuccess:this.authSuccess.bind(this)})),o.a.createElement("div",null,o.a.createElement(b.GoogleLogout,null))))}}]),t}(n.Component),k=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(j,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.6e92ec53.chunk.js.map